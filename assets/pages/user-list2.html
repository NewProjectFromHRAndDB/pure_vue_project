<!DOCTYPE html>
<html>

<head>
	<meta chartset='utf-8'>
	<title>用户管理</title>
	<link rel="stylesheet" type="text/css" href="../css/reset.css">
	<link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="../css/zxx.lib.css">
	<link rel="stylesheet" type="text/css" href="../css/element.css">
	<link rel="stylesheet" type="text/css" href="../css/app.css">
	<link rel="stylesheet" type="text/css" href="../css/formal.css">
</head>

<body class="fw f14">
	<div id="app">
		<el-container>
			<div class="header-box navbar">
				<div class="container">
					<div class="navbar-header">
						<button class="navbar-toggle collapsed" id="oscar-nav-btn" type="button" data-toggle="collapse" data-target="#bs-navbar"
						aria-controls="bs-navbar" aria-expanded="false">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<a href="../" class="navbar-brand">
							<div class="logo2">
								<!-- 运营拍档 -->
							</div>
						</a>
					</div>
					<!-- /navbar-header -->
					<nav class="navbar-collapse collapse" id="bs-nav">
						<ul class="nav navbar-nav navbar-right">
							<li>
								<a class="fix" style="width:44px;" href="/assets/pages/test02.html">
									<img src="../images/shishizhanshi.png">
								</a>
							</li>
							<li>
								<a class="glyphicon glyphicon-cog" href="javascript:;"></a>
							</li>
							<li>
								<a class="f12" href="javascript:;">
									&nbsp;&nbsp;<span>管理员</span>&nbsp;&nbsp;
									<span class="glyphicon glyphicon-triangle-top oscar-arrow frame-duration"></span>
									<div class="dada abs ovh">
										<div class="dada-item">
											<span class="glyphicon glyphicon-user"></span>
											<span class="ml5">个人中心</span>
										</div>
										<div class="dada-item">
											<span class="glyphicon glyphicon-off"></span>
											<span class="ml5">退出</span>
										</div>
									</div>
									<!-- /dada -->
								</a>
							</li>
						</ul>
					</nav>
					<div class="dada2 abs ovh f12">
						<div class="dada-item">
							<span class="glyphicon glyphicon-user"></span>
							<span class="ml5">个人中心</span>
						</div>
						<div class="dada-item">
							<span class="glyphicon glyphicon-off"></span>
							<span class="ml5">退出</span>
						</div>
					</div>
					<!-- /dada -->
				</div>
				<!-- /container -->
			</div>
			<!-- /header-box -->

			<div class="left-sidebar">
				<a id="menu-toggle-btn" class="abs db el-icon-arrow-left menu-toggle-btn f12 tc" href="javascript:;"></a>
				<div id="menu-box">
					<big-tree default-active="3-1"></big-tree>
				</div>
			</div>
			<!-- /left-sidebar -->

			<div class="main-box">
				<div class="main-container">
					<div id="tableView">
						<el-row> 
							<el-form  label-width="70px" :inline="true" class="el-form demo-form-inline">

									<el-row type="flex" justify="center">
										<el-col :span="10">
											<el-form-item label="用户名">  
												<el-input size="small" v-model="searchForm.username" placeholder="用户名" style="width: 300px;"></el-input>  
											</el-form-item>
										</el-col>
										<el-col :span="2">&nbsp;</el-col>
										<el-col :span="10">
											<el-form-item label="真实姓名">
												<el-input size="small" v-model="searchForm.realname" placeholder="真实姓名" style="width: 300px;"></el-input>
											</el-form-item>
										</el-col>
										<!--<el-col :span="7">
										<el-form-item label="性别">
											<el-radio-group  v-model="searchForm.sex">  
												<el-radio class="radio" :label="1">男</el-radio>  
												<el-radio class="radio" :label="0">女</el-radio>  
											</el-radio-group> 
										</el-form-item>
										</el-col>
										<el-col :span="7">
										<el-form-item label="职务">
											<el-input v-model="searchForm.position" placeholder="职务"></el-input>
										</el-form-item>
										</el-col>
									</el-row>
									<el-row gutter="41">
									<el-col :span="7">
										<el-form-item label="生日"> <el-date-picker v-model="searchForm.birth" placeholder="生日" style="width: 172px"></el-date-picker> </el-form-item>
									</el-col>				
									<el-col :span="7">
									<el-form-item label="部门名称">  
										<el-select size="mini" v-model="searchForm.deptname" placeholder="部门名称" style="width: 172px">  
											<el-option label="部门1" value="部门1"></el-option>  
											<el-option label="部门2" value="部门2"></el-option>  
										</el-select>  
									</el-form-item>
									</el-col>-->
									<!--<el-col :span="7">
									<el-form-item label="合同/临时">
										<el-select v-model="searchForm.jobtype" placeholder="合同/临时" style="width: 172px">
											<el-option label="单位1" value="单位1"></el-option>
											<el-option label="单位2" value="单位2"></el-option>
										</el-select>
									</el-form-item>
									</el-col>-->
								</el-row> 
								<div>
									<el-form>
										<el-col :span="12" style="text-align: left">
											<el-form-item align="left">  
												<el-button type="primary" icon="edit" size="small" @click="editClick">修改</el-button>  
												<el-button type="danger" icon="delete" size="small" @click="removeSelection">删除</el-button>  
											</el-form-item>
										</el-col>
										<el-col :span="12"></el-col>
										<el-col :span="12" style="text-align: right">
											<el-form-item>  
												<el-button type="primary" icon="search" size="small" @click="searchClick">查询</el-button>  
												<el-button type="success" icon="plus" size="small" @click="addClick">新增</el-button>  
											</el-form-item>
										</el-col>
									</el-form>
								</div>
							</el-form>
						</el-row> 


						
						<div class="table_container">
						<el-table
								border
								id="table"
								:data="tableData.slice((currentPage-1)*pageSize,currentPage*pageSize)"
								v-loading.body="loading"  
								@selection-change="selectionChange"  
								style="width: 100%;"
								:height="tableheight"
								>
			
							<el-table-column  
							type="selection"  
							min-width="5%">  
							</el-table-column>
							<el-table-column 
								type="index" 
								label="序号"
								width="65"
								align="center">
							</el-table-column>
							<el-table-column  
								prop="username"  
								label="用户名"  
								min-width="10%"
								align="center">  
							</el-table-column>  
							<el-table-column  
								prop="realname"  
								label="真实姓名"  
								min-width="10%"
								align="center">  
							</el-table-column>  
							<el-table-column  
								prop="birth"  
								label="生日" 
								min-width="12%"
								align="center">  
							</el-table-column> 
							<el-table-column  
								prop="sex"  
								label="性别"  
								min-width="7%"
								align="center">  
							</el-table-column>  
							<el-table-column  
								prop="phone"  
								label="手机号"  
								min-width="17%"
								align="center">  
							</el-table-column>  
							<el-table-column  
								prop="email"  
								label="邮箱"  
								min-width="19%"
								align="center">  
							</el-table-column>
							<el-table-column  
								prop="role"  
								label="角色"  
								min-width="12%"
								align="center">
								<template slot-scope="scope">
									<el-popover
										ref="popover2"
										placement="bottom"
										title="角色"
										width="200"
										trigger="click"
										>
										<span v-for="role in scope.row.roles"><span>{{role.roleinfo}}</span><br></span>
									</el-popover>
									<el-button type="text" v-popover:popover2>查看详情</el-button>
								</template>	  
							</el-table-column>
							<!-- <el-table-column  
								label="操作"
								width="120"
								>  
								<template slot-scope="scope">  
									<el-button :plain="true" type="success" size="small" icon="edit" @click="editClick(scope.$index, scope.row)">编辑</el-button>  
									<el-button :plain="true" type="danger" size="small" icon="delete" @click="deleteClick(scope.$index, scope.row)">删除</el-button>
								</template>  
							</el-table-column>        -->
						</el-table>
						
								<!---->
								<!---->
						


						<!--列表底部工具条和分页符-->  
						<el-row type="flex" justify="end">  
								<el-col :span="18" >  
									<el-pagination  
											style="float: right"  
											@size-change="pageSizeChange"  
											@current-change="currentPageChange"  
											:current-page="currentPage"  
											:page-sizes="[10, 20, 30, 50]"  
											:page-size="pageSize"  
											layout="total, sizes, prev, pager, next, jumper"  
											:total=parseInt(total)>  
									</el-pagination>  
								</el-col>  
							</el-row> 
						</div>
							<!--详情界面-->  
							<el-dialog title="角色详情" :visible.sync="itemFormVisible" @close="closeitemDialog()" :close-on-click-modal="false">
								
							</el-dialog> 
							<!--新建界面-->  
							<el-dialog title="新建用户" :visible.sync="addFormVisible" @close="closeDialog(addForm)" :close-on-click-modal="false">  
								<el-form :model="addForm" label-width="80px" :rules="addFormRules" ref="addForm">
									<el-row>
										<el-col :span="8">            
											<el-form-item label="用户名" prop="username">  
											<el-input v-model="addForm.username" placeholder="用户名" auto-complete="off" style="width:180px"></el-input>  
											</el-form-item>
										</el-col>
										<el-col :span="4">&nbsp;</el-col>
										<el-col :span="8">            
											<el-form-item label="真实姓名" prop="realname">  
											<el-input v-model="addForm.realname" placeholder="真实姓名" auto-complete="off" style="width:180px"></el-input>  
											</el-form-item>
										</el-col>
									</el-row> 
									<el-row>
										<el-col :span="8">            
											<el-form-item label="密码" prop="password">  
											<el-input v-model="addForm.password" type="password" placeholder="密码" auto-complete="off" style="width:180px"></el-input>  
											</el-form-item>
										</el-col>
										<el-col :span="4">&nbsp;</el-col>
										<el-col :span="8">            
											<el-form-item label="确认密码" prop="checkPass">  
											<el-input v-model="addForm.checkPass" type="password" placeholder="确认密码" auto-complete="off" style="width:180px"></el-input>  
											</el-form-item>
										</el-col>
									</el-row>
									<el-row>
										<el-col :span="8">            
											<el-form-item label="手机号" prop="phone">  
											<el-input v-model="addForm.phone" auto-complete="off" placeholder="手机号" style="width:180px"></el-input>  
											</el-form-item>
										</el-col>
										<el-col :span="4">&nbsp;</el-col>
										<el-col :span="8">            
											<el-form-item label="邮箱" prop="email">  
											<el-input v-model="addForm.email" auto-complete="off" placeholder="邮箱" style="width:180px"></el-input>  
											</el-form-item>
										</el-col>
									</el-row>
									<el-row>
										<el-col :span="8">
											<el-form-item label="生日" prop="birth">  
												<el-date-picker type="date" placeholder="选择日期" @change="dateChangebirthday" format="yyyy-MM-dd"
												value-format="yyyy-MM-dd" auto-complete="off" v-model="addForm.birth" style="width:180px"></el-date-picker>  
											</el-form-item>
										</el-col>
										<el-col :span="4">&nbsp;</el-col>
										<el-col :span="8">
											<el-form-item label="性别" prop="sex">  
												<el-radio-group v-model="addForm.sex" auto-complete="off">  
													<el-radio class="radio" :label="1">男</el-radio>  
													<el-radio class="radio" :label="0">女</el-radio>  
												</el-radio-group>
											</el-form-item>
										</el-col>	
									</el-row>
									<el-row>
										<el-col :span="8">            
											<el-form-item label="角色">  
											<el-checkbox-group v-model="addForm.rolelist" auto-complete="off" style="width:180px">
												<el-checkbox v-for="role in addForm.rolelist" :label="role" :key="role">{{role}}</el-checkbox>
											</el-checkbox-group>  
											</el-form-item>
										</el-col>
									</el-row>      
								</el-form>  
								<div slot="footer" class="dialog-footer">  
									<el-button @click.native="closeDialog(addForm)">取消</el-button>  
									<el-button type="primary" @click.native="addSubmit(addForm)">提交</el-button>  
								</div>  
							</el-dialog> 

							<!--修改界面-->  
							<el-dialog title="修改" :visible.sync="editFormVisible" :close-on-click-modal="false">  
							<el-form :model="editForm" label-width="80px" :rules="editFormRules" ref="editForm">
								<el-row>
								<el-col :span="8">            
									<el-form-item label="用户名" prop="username">  
										<el-input v-model="editForm.username" placeholder="用户名" auto-complete="off" style="width:180px"></el-input>  
									</el-form-item>
								</el-col>
								<el-col :span="4">&nbsp;</el-col>
								<el-col :span="8">            
									<el-form-item label="真实姓名" prop="realname">  
										<el-input v-model="editForm.realname" placeholder="真实姓名" auto-complete="off" style="width:180px"></el-input>  
									</el-form-item>
								</el-col>
								
								</el-row> 
								<el-row>
									<el-col :span="8">            
										<el-form-item label="密码" prop="password">  
										<el-input v-model="editForm.password" type="password" placeholder="密码" auto-complete="off" style="width:180px"></el-input>  
										</el-form-item>
									</el-col>
									<el-col :span="4">&nbsp;</el-col>
									<el-col :span="8">            
										<el-form-item label="确认密码" prop="checkPass">  
										<el-input v-model="editForm.checkPass" type="password" placeholder="确认密码" auto-complete="off" style="width:180px"></el-input>  
										</el-form-item>
									</el-col>
								</el-row>
								<el-row>
									<el-col :span="8">            
										<el-form-item label="手机号" prop="phone">  
										<el-input v-model="editForm.phone" auto-complete="off" placeholder="手机号" style="width:180px"></el-input>  
										</el-form-item>
									</el-col>
									<el-col :span="4">&nbsp;</el-col>
									<el-col :span="8">            
										<el-form-item label="邮箱" prop="email">  
										<el-input v-model="editForm.email" auto-complete="off" placeholder="邮箱" style="width:180px"></el-input>  
										</el-form-item>
									</el-col>
								</el-row>
								<el-row>
									<el-col :span="8">
										<el-form-item label="生日" prop="birth">  
											<el-date-picker type="date" placeholder="选择日期" @change="dateChangebirthday" format="yyyy-MM-dd"
											value-format="yyyy-MM-dd" auto-complete="off" v-model="editForm.birth" style="width:180px"></el-date-picker>  
										</el-form-item>
									</el-col>
									<el-col :span="4">&nbsp;</el-col>
									<el-col :span="8">
										<el-form-item label="性别" prop="sex">  
											<el-radio-group v-model="editForm.sex" auto-complete="off">  
												<el-radio class="radio" :label="1">男</el-radio>  
												<el-radio class="radio" :label="0">女</el-radio>  
											</el-radio-group>
										</el-form-item>
									</el-col>	
								</el-row>
								<el-row>
									<el-col :span="8">            
										<el-form-item label="角色">  
										<el-checkbox-group v-model="editForm.rolelist" auto-complete="off" style="width:180px">
											<el-checkbox v-for="role in editForm.rolelist" :label="role" :key="role">{{role}}</el-checkbox>
										</el-checkbox-group>  
										</el-form-item>
									</el-col>
								</el-row>    
							</el-form>  
					<div slot="footer" class="dialog-footer">  
						<el-button @click.native="editFormVisible = false">取消</el-button>  
						<el-button type="primary" @click.native="editSubmit(editForm)">提交</el-button>  
					</div>  
				</el-dialog> 
					</div>
				</div>
				<!-- main-container -->
			</div>
	</el-container>
</div>

	<!-- /main-box -->
</body>
<script src="../lib/jquery-3.2.1.min.js"></script>
	<script src="../lib/vue.min.js"></script>
	<script src="../lib/elementUI.js" charset="utf-8"></script>
	<script>		
		$('#oscar-nav-btn').click(function () {
			$('.dada2').toggle();
		});

		

		var myData = [
			{
				'index': '1',
				'menuName': '首页',
				'url': '/assets/pages/index.html'
			},
			{
				'index': '2',
				'menuName': '重点单位管理',
				'url': '/assets/pages/key-unit.html'
			},
			{
				'index': '3',
				'menuName': '系统管理',
				'children': [
					{ 'index': '3-1', 'menuName': '用户管理', 'url': '/assets/pages/user-list2.html' },
					{ 'index': '3-2', 'menuName': '角色管理', 'url': '/assets/pages/role-list.html' },
					{ 'index': '3-3', 'menuName': '权限管理', 'url': '/assets/pages/permission.html' }
				]
			},
			{
				'index': '4',
				'menuName': '水源管理',
				'url': 'http://www.google.com'
			},
			{
				'index': '5',
				'menuName': '消防力量管理'
			},
		];
		
		// 定义树节点
		var treeMenuTemplate = [];
		treeMenuTemplate.push('<li class="el-submenu" :class="[open ? \'\': \'\', selected ? \'is-active\':\'\']">');
		treeMenuTemplate.push('<a class="db el-submenu__title" :id="model.index" @click="toggle" v-menu-animation="open" :style="{paddingLeft: paddingLeft + \'px\'}" :href="getUrl">');
		treeMenuTemplate.push('<i class="el-icon-message" v-if="level == 1"></i>');
		treeMenuTemplate.push('<template v-if="hasChildren()">');
		treeMenuTemplate.push('<i class="el-submenu__icon-arrow" :class="[open ? \'el-icon-arrow-up\': \'el-icon-arrow-down\']"></i>');
		treeMenuTemplate.push('</template>');
		treeMenuTemplate.push('{{ model.menuName }}');
		treeMenuTemplate.push('</a>');
		treeMenuTemplate.push('<ul class="el-menu" :class="[open ? \'\' : \'dn\']" v-if="hasChildren()">');
		treeMenuTemplate.push('<tree-menu v-for="item in model.children" :model="item" :level="level + 1" :theId="theId"></tree-menu>');
		treeMenuTemplate.push('</ul>');
		treeMenuTemplate.push('</li>');

		var treeMenu = Vue.component('tree-menu', {
			template: treeMenuTemplate.join(''),

			created: function () {
				var index = this.model.index;
				var hasIndex = this.theId.search(index);
				var lala = index.replace(this.theId, '');
				if (hasIndex == 0) {
					this.open = true;
				}
				if (hasIndex == 0 && lala.length == 0) {
					this.selected = true;
				}
			},

			props: ['model', 'level', 'theId'],

			computed: {
				getUrl: function () {
					if (this.hasChildren()) {
						return "javascript:;";
					}
					return this.model.url;
				}
			},

			data: function () {
				return {
					open: true,
					paddingLeft: this.level * 20,
					selected: false,
					
				};
			},

			methods: {
				hasChildren: function () {
					return this.model.children && this.model.children.length;
				},

				toggle: function () {
					if (this.hasChildren()) {
						this.open = !this.open;
					}
				},
			}

		});

		Vue.directive('menu-animation', function (el, binding) {
			var open = (binding.value);
			var ulElement = $(el).parent().children('ul');
			if (open) {
				ulElement.slideDown(200);
			} else {
				ulElement.slideUp(200);
			}
		});

		// 定义外围树
		var bigTreeTemplate = [];
		bigTreeTemplate.push('<div class="tree-menu">');
		bigTreeTemplate.push('<ul v-for="menuItem in theModel" class="el-menu">');
		bigTreeTemplate.push('<tree-menu :model="menuItem" :level="theLevel" :theId="defaultActive"></tree-menu>');
		bigTreeTemplate.push('</ul>');
		bigTreeTemplate.push('</div>');

		Vue.component('big-tree', {
			template: bigTreeTemplate.join(''),

			props: ['defaultActive'],

			created: function () { },

			data: function () {
				return {
					theModel: myData,
					theLevel: 1
				};
			},

			components: {
				'tree-menu': treeMenu
			}
		});
		new Vue({
			el: '#app',
			data: function() {
			  return { visible: false,
			  awa:"",
			  //搜索表单
			  searchForm: {
				id: "",
				username:"",
				realname: "",
				// deptname:'',
				// birth:"",
				// sex:"",
				// state: "",
				// position:"",
				// worklife:"",
				// position:"",
				// jobtype:"",
				// DRUS:""
			  },
			  //表数据
			  tableData: [
				{
					userid:"12306",
					username:"lst",
					password:"123456",
					realname: "刘树田",
					birth: "1986-05-03",
					sex: "男",
					phone: "13242452511",
					email: "liushutian@syfri.com",
					roles:[
						{
							roleid:"1",
							rolename:"normal",
							roleinfo:"普通用户",
							delete_flag:"0"
						},
						{
							roleid:"3",
							rolename:"liaoning",
							roleinfo:"辽宁省",
							delete_flag:"0"
						},
					]
				},
			   	{
					userid:"12307",
					username:"sbs",
					password:"654321",
					realname: "孙宝书",
					birth: "1991-01-02",
					sex: "男",
					phone: "13242124124",
					email: "sunbaoshu@syfri.com",
					roles:[
						{
							roleid:"1",
							rolename:"normal",
							roleinfo:"普通用户",
							delete_flag:"0"
						},
						{
							roleid:"2",
							rolename:"shandong",
							roleinfo:"山东省",
							delete_flag:"0"
						},
						{
							roleid:"3",
							rolename:"liaoning",
							roleinfo:"辽宁省",
							delete_flag:"0"
						}
					]
				},
				{
					userid:"12308",
					username:"cc",
					password:"123789",
					realname: "曹德",
					birth: "1996-02-16",
					sex: "女",
					phone: "13932425651",
					email: "caode@syfri.com",
					roles:[
						{
							roleid:"2",
							rolename:"shandong",
							roleinfo:"山东省",
							delete_flag:"0"
						},
						{
							roleid:"3",
							rolename:"liaoning",
							roleinfo:"辽宁省",
							delete_flag:"0"
						},
						{
							roleid:"4",
							rolename:"admin",
							roleinfo:"管理员",
							delete_flag:"0"
						}
					]
				},
				{
					userid:"12309",
					username:"lhz",
					password:"456789",
					realname: "刘海柱",
					birth: "1991-11-14",
					sex: "男",
					phone: "13987654212",
					email: "liuhaizhu@syfri.com",
					roles:[
						{
							roleid:"2",
							rolename:"shandong",
							roleinfo:"山东省",
							delete_flag:"0"
						},
						{
							roleid:"3",
							rolename:"liaoning",
							roleinfo:"辽宁省",
							delete_flag:"0"
						},
					]
				},
				{
					userid:"12310",
					username:"zl",
					password:"987554",
					realname: "张文斌",
					birth: "1996-05-03",
					sex: "女",
					phone: "13987654321",
					email: "zhangwb@syfri.com",
					roles:[
						{
							roleid:"1",
							rolename:"normal",
							roleinfo:"普通用户",
							delete_flag:"0"
						},
					]
				},
				{
					userid:"12311",
					username:"ss",
					password:"253456",
					realname: "孙尚",
					birth: "1989-10-09",
					sex: "女",
					phone: "13687994241",
					email: "sunshang@syfri.com",
					roles:[
						{
							roleid:"1",
							rolename:"normal",
							roleinfo:"普通用户",
							delete_flag:"0"
						},
						{
							roleid:"2",
							rolename:"shandong",
							roleinfo:"山东省",
							delete_flag:"0"
						},
						{
							roleid:"3",
							rolename:"liaoning",
							roleinfo:"辽宁省",
							delete_flag:"0"
						},
						{
							roleid:"4",
							rolename:"admin",
							roleinfo:"管理员",
							delete_flag:"0"
						}
					]
				},
				{
					userid:"12312",
					username:"zax",
					password:"524324",
					realname: "张艾希",
					birth: "1993-08-12",
					sex: "女",
					phone: "13742141412",
					email: "aixi@syfri.com",
					roles:[
						{
							roleid:"3",
							rolename:"liaoning",
							roleinfo:"辽宁省",
							delete_flag:"0"
						},
						{
							roleid:"4",
							rolename:"admin",
							roleinfo:"管理员",
							delete_flag:"0"
						}
					]
				},
				{
					userid:"12313",
					username:"ndl",
					password:"53521122",
					realname: "牛大力",
					birth: "1986-07-25",
					sex: "男",
					phone: "13242452511",
					email: "niudali@syfri.com",
					roles:[
						{
							roleid:"2",
							rolename:"shandong",
							roleinfo:"山东省",
							delete_flag:"0"
						}
					]
				},
				{
					userid:"12314",
					username:"mz",
					password:"etqw1234",
					realname: "马昭",
					birth: "1997-03-28",
					sex: "男",
					phone: "13389852376",
					email: "mazhao@syfri.com",
					roles:[
						{
							roleid:"4",
							rolename:"admin",
							roleinfo:"管理员",
							delete_flag:"0"
						}
					]
				},
				{
					userid:"12315",
					username:"fyb",
					password:"wda123",
					realname: "冯玉冰",
					birth: "1991-09-12",
					sex: "女",
					phone: "13485432376",
					email: "fengyubing@syfri.com",
					roles:[
						{
							roleid:"2",
							rolename:"shandong",
							roleinfo:"山东省",
							delete_flag:"0"
						}
					]
				}
			 ],
			 //用户角色data
			 /*userroleData: [
				{
					userid:"12306",
					roleid:"1"
				},
				{
					userid:"12306",
					roleid:"3"
				},
				{
					userid:"12307",
					roleid:"1"
				},
				{
					userid:"12307",
					roleid:"2"
				},
				{
					userid:"12307",
					roleid:"3"
				},
				{
					userid:"12308",
					roleid:"2"
				},
				{
					userid:"12308",
					roleid:"3"
				},
				{
					userid:"12308",
					roleid:"4"
				},
				{
					userid:"12309",
					roleid:"3"
				},
				{
					userid:"12310",
					roleid:"4"
				},
				{
					userid:"12311",
					roleid:"1"
				},
				{
					userid:"12312",
					roleid:"2"
				},
				{
					userid:"12313",
					roleid:"3"
				},
				{
					userid:"12314",
					roleid:"4"
				},
				{
					userid:"12315",
					roleid:"2"
				},
			 ],
			  //角色data
			  roleData: [
				{
					roleid:"1",
					roleinfo:"普通用户"
				},
				{
					roleid:"2",
					roleinfo:"管理员"
				},
				{
					roleid:"3",
					roleinfo:"超级管理员"
				},
				{
					roleid:"4",
					roleinfo:"系统管理员"
				},
			 ],*/
			 roleList:[],
			   rowdata:'',
			   //表高度变量
			   tableheight :465,
			   //显示加载中样
			   loading: false,
			   labelPosition: 'right',
			    //多选值
				multipleSelection: [],
				//当前页
				currentPage: 1,
				//分页大小
				pageSize: 10,
				//总记录数
				total:10, 
				//行数据保存
				rowdata:{

				},
				//序号
				indexData:0,
				//详情页是否显示
				itemFormVisible:false,
				//删除的弹出框
				deleteVisible: false,
				//新建页面是否显示
				addFormVisible:false,
				addLoading:false,
				addFormRules:{
					realname: [
					{ required: true, message: '请输入真实姓名', trigger: 'blur' },
					{ min: 2, max: 4, message: '长度在 2 到 4 个字符', trigger: 'blur' }
				  ],
				  username: [
					{ required: true, message: '请输入用户名', trigger: 'blur' },
					{ min: 2, max: 16, message: '长度在 2 到 16 个字符', trigger: 'blur' }
				  ],
				  birth:[
				  { type: 'date', required: false, message: '请选择出生日期', trigger: 'change' }
				  ],
				  sex: [
				  { required: false, message: '请选择性别', trigger: 'change' }
				  ],
				  phone: [
				  { required: false, message: '请输入手机号', trigger: 'blur' },
					{ min: 11, max: 11, message: '手机号格式不正确', trigger: 'blur' }
				  ],
				  email: [
				  { required: false, message: '请输入邮箱地址', trigger: 'blur' },
				  { type: 'email', message: '请输入正确的邮箱地址', trigger: 'blur,change' }
				  ],
				  password: [
				  { required: true, message: '请输入密码', trigger: 'blur' },
					{ min: 6, max: 16, message: '长度在 6 到 16 个字符', trigger: 'blur' }
				  ],
	  
				},
				//新建数据
				addForm:{
					userid:"",
					username:"",
					password:"",
					checkPass:"",
					realname: "",
					birth:"",
					sex: -1,
					phone:"",
					email:"",
					rolelist:[]
				},
				//选中的序号
				selectIndex: -1, 
				//修改界面是否显示
				editFormVisible: false,
				editLoading: false,
				editFormRules: {
					realname: [
					{ required: true, message: '请输入真实姓名', trigger: 'blur' },
					{ min: 2, max: 4, message: '长度在 2 到 4 个字符', trigger: 'blur' }
				  ],
				  username: [
					{ required: true, message: '请输入用户名', trigger: 'blur' },
					{ min: 2, max: 16, message: '长度在 2 到 16 个字符', trigger: 'blur' }
				  ],
				  birth:[
				  { type: 'date', required: false, message: '请选择出生日期', trigger: 'change' }
				  ],
				  phone: [
				  { required: false, message: '请输入手机号', trigger: 'blur' },
					{ min: 11, max: 11, message: '手机号格式不正确', trigger: 'blur' }
				  ],
				  email: [
				  { required: false, message: '请输入邮箱地址', trigger: 'blur' },
				  { type: 'email', message: '请输入正确的邮箱地址', trigger: 'blur,change' }
				  ],
				  password: [
				  { required: true, message: '请输入密码', trigger: 'blur' },
					{ min: 6, max: 16, message: '长度在 6 到 16 个字符', trigger: 'blur' }
				  ],
				},
				//修改界面数据
				editForm: {
					userid:"",
					username:"",
					password:"",
					checkPass:"",
					realname: "",
					birth:"",
					sex: -1,
					phone:"",
					email:"",
					rolelist:[]
				},
			   
			   }
			},
			mounted:function(){

			},
			methods:{

			
			//表格查询事件
			searchClick: function() {
			var _self = this;
			var tableObject ={};
			var searchData=[];
			function isEmptyObject(obj) {
				for (var key in obj) {
					return false;
				}
				return true;
			}
			 for(var i=0;i<_self.tableData.length;i++){
			 	searchData.push(_self.tableData[i]);
			 }
			
			if(_self.searchForm.realname != ""&&_self.searchForm.username != ""){
				for(var i = 0;i<_self.tableData.length;i++){
					if((_self.tableData[i].realname == _self.searchForm.realname&&_self.tableData[i].username == _self.searchForm.username))//&&(tableObject.birth == this.searchForm.birth&&this.searchForm.birth!="")
					//&&(tableObject.position == this.searchForm.position&&this.searchForm.position!="")&&(tableObject.deptname == this.searchForm.deptname&&this.searchForm.deptname!="")
					//&&(tableObject.jobtype == this.searchForm.jobtype&&this.searchForm.jobtype!=""))//&&(tableObject.sex == (searchForm.sex==0?"女":"男")))
					{	
						tableObject = _self.tableData[i];
						
					}
					
				}
				_self.tableData.splice(0,_self.tableData.length);
				if(!isEmptyObject(tableObject)){
					_self.tableData.push(tableObject);
				}
			}
			else if(_self.searchForm.realname != ""&&_self.searchForm.username == ""){
				for(var i = 0;i<_self.tableData.length;i++){
					if(_self.tableData[i].realname == _self.searchForm.realname)
					{	
						tableObject = _self.tableData[i];
						
					}
					
				}
				_self.tableData.splice(0,_self.tableData.length);
				if(!isEmptyObject(tableObject)){
					_self.tableData.push(tableObject);
				}
			}
			else if(_self.searchForm.realname == ""&&_self.searchForm.username != ""){
				for(var i = 0;i<_self.tableData.length;i++){
					if(_self.tableData[i].username == _self.searchForm.username)
					{	
						tableObject = _self.tableData[i];
					}
					
				}
				_self.tableData.splice(0,_self.tableData.length);
				if(!isEmptyObject(tableObject)){	
					_self.tableData.push(tableObject);
				}
			}
			//搜索项为空时恢复全部数据
			else{
				_self.tableData = searchData;
			}
			
			//_self.tableData.filter((item)=>{return item.realname == _self.searchForm.realname	});
			_self.total = _self.tableData.length;
			_self.loadingData(); //重新加载数据
			},
			//表格勾选事件
			selectionChange: function(val) {
			 for (var i = 0; i < val.length; i++) {
			 	var row = val[i];
			 }
			 this.multipleSelection = val;
			//this.sels = sels
			console.info(val);
			},
			//批量删除数据
			// delGroup() {  
			// 	var ids = this.sels.map(item => item.id).join()//获取所有选中行的id组成的字符串，以逗号分隔
				  
        	// },  
			//时间格式
			dateChangebirthday(val) {  
				console.log(val);  
				this.addForm.birth = val;
				this.editForm.birth = val;  
			},
			//表格重新加载数据
			loadingData: function() {
			var _self = this;
			_self.loading = true;
			setTimeout(function() {
				console.info("加载数据成功");
				_self.loading = false;
			}, 300);
			},
			//表格删除事件
			/*deleteClick: function(index,row) {
			var _self = this;
			this.$confirm("确认删除" + row.realname + "吗?", "提示", {
				type: "warning",
				confirmButtonText: '确定',
				cancelButtonText: '取消'
			})
				.then(function() {
				_self.tableData.splice(index,1);
				_self.$message({
					message: row.realname + "删除成功",
					type: "success"
				});
				_self.loadingData(); //重新加载数据
				})
				.catch(function(e) {
				if (e != "cancel") console.log("出现错误：" + e);
				});
			},*/
			//角色详情
			openRoleList:function(val){
				/*axios.post('',val).then(function(res){
					this.roleData=res.data;
					console.log(this.roleData);
				}.bind(this),function(error){
					console.log(error)
				})*/
				
				/*this.roleList.splice(0,this.roleList.length);
				var roleidList=[];
				for(var i=0;i<this.userroleData.length;i++){
					if(this.userroleData[i].userid == val){
					roleidList.push(this.userroleData[i].roleid);
					}
				}
				for(var k=0;k<this.roleData.length;k++){
					for(var d=0;d<roleidList.length;d++){
						if(this.roleData[k].roleid == roleidList[d]){
							this.roleList.push(this.roleData[k].roleinfo);
						}
					}
				}*/
			},
			//新建事件
			addClick: function() {
				var _self = this;
				/*POST请求全部的角色role列表项传给add页面数据*/ /*此时尚无userid*/
				//this.addForm.rolelist = res.data.rolelist;
				this.addForm.birth = "";
				_self.addFormVisible = true;

			},
			//查看详情
			itemClick: function() {
			var _self = this;
			_self.itemFormVisible = true;
			
			},
			//删除所选，批量删除
			removeSelection: function() {
			var _self = this;
			var multipleSelection = this.multipleSelection;
			if (multipleSelection.length < 1) {
				_self.$message({
				message: "请至少选中一条记录",
				type: "error"
				});
				return;
			}
			//var ids = "";
			var ids = [];
			var deletename =[];
			for (var i = 0; i < multipleSelection.length; i++) {
				var row = multipleSelection[i];
				//ids += row.realname + ",";
				//删除POST请求时传入ids里的userid作为删除唯一标识
				ids.push(row.userid);
				deletename.push(row.realname);
			}
			this.$confirm("确认删除" + deletename + "吗?", "提示", {
				type: "warning"
			})
				.then(function() {
				/*POST请求之后再对前台加载*/
				for(var d =0;d< ids.length;d++){
					for(var k=0;k< _self.tableData.length;k++)
						{
							if(_self.tableData[k].userid == ids[d]){
								_self.tableData.splice(k,1);
							}
						}
				}
				_self.$message({
					message: deletename + "删除成功",
					type: "success"
				});
				_self.total = _self.tableData.length;
				_self.loadingData(); //重新加载数据
				})
				.catch(function(e) {
				if (e != "cancel") console.log("出现错误：" + e);
				});
			},
			//分页大小修改事件
			pageSizeChange: function(val) {
			console.log("每页 " + val + " 条");
			this.pageSize = val;
			var _self = this;
			_self.loadingData(); //重新加载数据
			},
			//当前页修改事件
			currentPageChange: function(val) {
			this.currentPage = val;
			console.log("当前页: " + val);
			var _self = this;
			_self.loadingData(); //重新加载数据
			},
			//表格修改事件
			editClick: function() {
			var _self = this;
			var multipleSelection = this.multipleSelection;
			if (multipleSelection.length < 1) {
				_self.$message({
				message: "请至少选中一条记录",
				type: "error"
				});
				return;
			}
			else if(multipleSelection.length>1){
				_self.$message({
					message:"只能选一条记录进行修改",
					type:"error"
				});
				return;
			}
			//var ids = "";
			var ids = [];
			for (var i = 0; i < multipleSelection.length; i++) {
				var row = multipleSelection[i];
				//ids += row.realname + ",";
				//编辑时POST传入唯一标识userid来取出特殊项
				ids.push(row.userid);
			}
			/*POST请求之后再对前台加载*/
			for(var d =0;d< ids.length;d++){
					for(var k=0;k< _self.tableData.length;k++)
						{
							if(_self.tableData[k].userid == ids[d]){
								_self.selectIndex = k;
							}
						}
				}
			this.editForm = Object.assign({}, _self.tableData[_self.selectIndex]);
			this.editForm.sex=(row.sex == "男"?1:0);
			/*请求到的角色role列表传给edit页面数据*/
			//this.editForm.rolelist = res.data.rolelist;
			this.editForm.checkPass=row.password;
			this.editFormVisible = true;
			},
			//保存点击事件
			editSubmit: function(val) {
			var _self = this;
			/*this.$refs[val].validate((valid) => {
				if (valid) {
					//alert('submit!');*/
				
					/*POST请求递交editForm数据传入userid之后再对前台加载*/
					this.tableData[this.selectIndex].userid = val.userid;
					this.tableData[this.selectIndex].realname = val.realname;
					this.tableData[this.selectIndex].birth = val.birth;
					this.tableData[this.selectIndex].sex = (val.sex == 0?"女":"男");
					this.tableData[this.selectIndex].username = val.username;
					this.tableData[this.selectIndex].phone = val.phone;
					this.tableData[this.selectIndex].email = val.email;
					this.editFormVisible = false;
					_self.loadingData();//重新加载数据
					console.info(this.editForm);
				/*} 
				else 
				{
					console.log('error submit!!');
					return false;
				}
			});*/
			},
			//新建提交点击事件
			addSubmit: function(val) {
				var _self=this;
				/*POST请求递交addForm数据传入之后再对前台加载*/ /*此时尚无userid*/
				this.tableData.unshift({
					realname: val.realname,
					birth: val.birth,
					sex: (val.sex == 0?"女":"男"),
					username:val.username,
					phone:val.phone,
					email:val.email
				});
				this.addFormVisible = false;
				_self.total = _self.tableData.length;
				_self.loadingData();//重新加载数据
				val.realname = "";
				val.birth = "";
				val.sex = "";
				val.username ="";
				val.phone = "";
				val.email ="";
				console.info(this.addForm);
				
			},
			closeDialog:function(val){
				this.addFormVisible = false;
				val.realname = "";
				val.birth = "";
				val.sex = "";
				val.username ="";
				val.phone = "";
				val.email ="";
			},
			closeitemDialog:function(){
				this.itemFormVisible=false;
			}
		},
			
	})
		  
		  $('#menu-toggle-btn').click(function () {
			var left = $('.left-sidebar'),
				main = $('.main-box'),
				$this = $(this);
			if (left.hasClass('damin')) {
				left.removeClass('damin').css('left', '0');
				main.css('padding-left', '240px');
				setTimeout(function () {
					$this.removeClass('menu-toggle-bg').css({ "right": "0", "transform": "rotateY(0)" });
				}, 300);
			} else {
				left.addClass('damin').css('left', '-240px');
				main.css('padding-left', 0);
				setTimeout(function () {
					$this.addClass('menu-toggle-bg').css({ "right": "-26px", "transform": "rotateY(180deg)" });
				}, 300);
			}
		});
	</script>
</html>