<!DOCTYPE html>
<html>

<head>
	<meta chartset='utf-8'>
	<title>运营拍档</title>
	<link rel="stylesheet" type="text/css" href="../css/reset.css">
	<link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="../css/zxx.lib.css">
	<link rel="stylesheet" type="text/css" href="../css/element.css">
	<link rel="stylesheet" type="text/css" href="../css/app.css">
</head>

<body class="fw f14">
<<<<<<< HEAD
	<div class="header-box navbar m0">
		<div class="container">
			<div class="navbar-header">
				<button class="navbar-toggle collapsed" id="oscar-nav-btn" type="button" data-toggle="collapse" data-target="#bs-navbar"
				 aria-controls="bs-navbar" aria-expanded="false">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a href="../" class="navbar-brand">
					<div class="logo2">
						<!-- 运营拍档 -->
					</div>
				</a>
			</div>
			<!-- /navbar-header -->
			<nav class="navbar-collapse collapse" id="bs-nav">
				<ul class="nav navbar-nav navbar-right">
					<li>
						<a class="fix" href="javascript:;">
							<span class="glyphicon glyphicon-volume-up l mt3"></span>
							<span class="f12 l mt1 ml5">(0)</span>
						</a>
					</li>
					<li>
						<a class="glyphicon glyphicon-cog" href="javascript:;"></a>
					</li>
					<li>
						<a class="f12" href="javascript:;">
							<span>oscar@outlook.com</span>
							<span class="glyphicon glyphicon-triangle-top oscar-arrow frame-duration"></span>
							<div class="dada abs ovh">
								<div class="dada-item">
									<span class="glyphicon glyphicon-user"></span>
									<span class="ml5">个人中心</span>
								</div>
								<div class="dada-item">
									<span class="glyphicon glyphicon-off"></span>
									<span class="ml5">退出</span>
								</div>
=======
	<div id="app">
		<el-container>
			<div class="header-box navbar">
				<div class="container">
					<div class="navbar-header">
						<button class="navbar-toggle collapsed" id="oscar-nav-btn" type="button" data-toggle="collapse" data-target="#bs-navbar"
						aria-controls="bs-navbar" aria-expanded="false">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<a href="../" class="navbar-brand">
							<div class="logo2">
								<!-- 运营拍档 -->
>>>>>>> be3582cb38fba6ae8671801ca49ffe0d963efa9f
							</div>
						</a>
					</div>
					<!-- /navbar-header -->
					<nav class="navbar-collapse collapse" id="bs-nav">
						<ul class="nav navbar-nav navbar-right">
							<li>
								<a class="fix" href="javascript:;">
									<span class="glyphicon glyphicon-volume-up l mt3"></span>
									<span class="f12 l mt1 ml5">(0)</span>
								</a>
							</li>
							<li>
								<a class="glyphicon glyphicon-cog" href="javascript:;"></a>
							</li>
							<li>
								<a class="f12" href="javascript:;">
									<span>oscar@outlook.com</span>
									<span class="glyphicon glyphicon-triangle-top oscar-arrow frame-duration"></span>
									<div class="dada abs ovh">
										<div class="dada-item">
											<span class="glyphicon glyphicon-user"></span>
											<span class="ml5">个人中心</span>
										</div>
										<div class="dada-item">
											<span class="glyphicon glyphicon-off"></span>
											<span class="ml5">退出</span>
										</div>
									</div>
									<!-- /dada -->
								</a>
							</li>
						</ul>
					</nav>
					<div class="dada2 abs ovh f12">
						<div class="dada-item">
							<span class="glyphicon glyphicon-user"></span>
							<span class="ml5">个人中心</span>
						</div>
						<div class="dada-item">
							<span class="glyphicon glyphicon-off"></span>
							<span class="ml5">退出</span>
						</div>
					</div>
					<!-- /dada -->
				</div>
				<!-- /container -->
			</div>
			<!-- /header-box -->

			<div class="left-sidebar">
				<a id="menu-toggle-btn" class="abs db el-icon-arrow-left menu-toggle-btn f12 tc" href="javascript:;"></a>
				<div id="menu-box">
					<big-tree default-active="2-1"></big-tree>
				</div>
			</div>
			<!-- /left-sidebar -->

			<div class="main-box">
				<div class="main-container">
					<div id="tableView">
						<el-row> 
							<el-form :label-position="labelPosition" class="el-form demo-form-inline">
								<div>
									<el-row>
									<el-col :span="10">
									<el-form-item label="ID">  
										<el-input v-model="searchForm.id" placeholder="ID"></el-input>  
									</el-form-item>
									</el-col>
									<el-col :span="2">&nbsp;</el-col>
									<el-col :span="10">
									<el-form-item label="工作年限">
										<el-input v-model="searchForm.worklife" placeholder="工作年限"></el-input> 
									</el-form-item>
									</el-col>
									</el-row>
									<el-row>
									<el-col :span="10">
									<el-form-item label="职位">
										<el-input v-model="searchForm.position" placeholder="职位"></el-input>
									</el-form-item>
									</el-col>
									<el-col :span="2">&nbsp;</el-col>
									<el-col :span="10">
									<el-form-item label="姓名">  
										<el-input v-model="searchForm.realname" placeholder="姓名"></el-input>  
									</el-form-item>
									</el-col>
									</el-row>
									<el-row>
									<el-col :span="10">
									<el-form-item label="部门名称">  
										<el-select v-model="searchForm.deptname" placeholder="部门名称">  
											<el-option label="部门1" value="dept1"></el-option>  
											<el-option label="部门2" value="dept2"></el-option>  
										</el-select>  
									</el-form-item>
									</el-col>
									<el-col :span="2">&nbsp;</el-col>
									<el-col :span="10">
									<el-form-item label="直属单位">
										<el-select v-model="searchForm.DRUS" placeholder="直属单位">
											<el-option label="单位1" value="drus1"></el-option>
											<el-option label="单位2" value="drus2"></el-option>
										</el-select>
									</el-form-item>
									</el-col>
									</el-row> 
								</div>
								<div align="right">
									<el-form-item>  
										<el-button type="primary" icon="search" @click="searchClick">查询</el-button>  
										<el-button type="success" icon="plus" @click="addClick">新增</el-button>  
									</el-form-item>
								</div>
							</el-form>
						</el-row> 


						

						<el-table
								border
								:data="tableData"
								v-loading.body="loading"  
								border  
								@selection-change="selectionChange"  
								style="width: 100%">
			
							<el-table-column  
							type="selection"  
							width="45">  
							</el-table-column>
							<el-table-column  
								label="操作"
								width="100"
								>  
							<template slot-scope="scope">  
								<el-button :plain="true" type="success" size="small" icon="edit" @click="editClick(scope.row)">编辑</el-button><br>  
								<el-button :plain="true" type="danger" size="small" icon="delete" @click="deleteClick(scope.row)">删除</el-button>  
							</template>  
							</el-table-column>  
							<el-table-column 
								type="index" 
								label="序号"
								width="35">
							</el-table-column> 
							<el-table-column  
								prop="realname"  
								label="真实姓名"  
								width="120">  
							</el-table-column>  
							<el-table-column  
								prop="birth"  
								label="生日"
								sortable   
								width="150">  
							</el-table-column> 
							<el-table-column  
								prop="sex"  
								label="性别"  
								width="120">  
							</el-table-column>  
							<el-table-column  
								prop="deptname"  
								label="部门名称"  
								width="300">  
							</el-table-column>  
							<el-table-column  
								prop="position"  
								label="职务"  
								width="120">  
							</el-table-column>
							<el-table-column  
								prop="jobtype"  
								label="合同/临时"  
								width="120">  
							</el-table-column>     
						</el-table>
								<!---->
								<!---->
						


						<!--列表底部工具条和分页符-->  
						<el-row style="margin-top: 20px" type="flex" justify="end">  
								<el-col :span="6" >  
									<el-button :plain="true" type="danger" size="small" icon="delete" @click="removeSelection">删除所选</el-button>  
								</el-col>  
								<el-col :span="18" >  
									<el-pagination  
											style="float: right"  
											@size-change="pageSizeChange"  
											@current-change="currentPageChange"  
											:current-page="currentPage"  
											:page-sizes="[10, 20, 30, 50]"  
											:page-size="pageSize"  
											layout="total, sizes, prev, pager, next, jumper"  
											:total="total">  
									</el-pagination>  
								</el-col>  
							</el-row> 

							<!--编辑界面-->  
							<el-dialog title="编辑" :visible.sync="editFormVisible" :close-on-click-modal="false">  
							<el-form :model="editForm" label-width="80px" :rules="editFormRules" ref="editForm">
								<el-row>
								<el-col :span="8">            
									<el-form-item label="姓名" prop="realname">  
									<el-input v-model="editForm.realname" auto-complete="off"></el-input>  
									</el-form-item>
								</el-col>
								<el-col :span="8">
									<el-form-item label="性别">  
										<el-radio-group v-model="editForm.sex">  
											<el-radio class="radio" :label="1">男</el-radio>  
											<el-radio class="radio" :label="0">女</el-radio>  
										</el-radio-group>  
									</el-form-item>
								</el-col>
								</el-row> 
								<el-row>
								<el-col :span="10">
									<el-form-item label="生日">  
										<el-date-picker type="date" placeholder="选择日期" v-model="editForm.birth"></el-date-picker>  
									</el-form-item>
								</el-col>
								<el-col :span="2">&nbsp;</el-col>
								<el-col :span="8">
									<el-form-item label="部门名称">  
										<el-select v-model="searchForm.chgdept" placeholder="部门名称">  
										<el-option label="部门1" value="dept1"></el-option>  
										<el-option label="部门2" value="dept2"></el-option>  
									</el-select>   
									</el-form-item>
								</el-col>
								</el-row> 
							</el-form>  
					<div slot="footer" class="dialog-footer">  
						<el-button @click.native="editFormVisible = false">取消</el-button>  
						<el-button type="primary" @click.native="editSubmit" :loading="editLoading">提交</el-button>  
					</div>  
				</el-dialog> 
					</div>
				</div>
				<!-- main-container -->
			</div>
	</el-container>
</div>

	<!-- /main-box -->

	<script src="../lib/jquery-3.2.1.min.js"></script>
	<script src="../lib/vue.min.js"></script>
	<script src="../lib/element.js" charset="utf-8"></script>
	<script>
		$('#oscar-nav-btn').click(function () {
			$('.dada2').toggle();
		});

		

		var myData = [
			{
				'index': '1',
				'menuName': '首页',
				'url': 'http://www.google.com'
			},
			{
				'index': '2',
				'menuName': '基础管理',
				'children': [
					{ 'index': '2-1', 'menuName': '用户管理', 'url': 'http://www.bing.com' },
					{ 'index': '2-2', 'menuName': '角色管理', 'url': 'http://www.baidu.com' },
					{ 'index': '2-3', 'menuName': '权限管理', 'url': 'http://www.xcar.com.cn' }
				]
			},
			{
				'index': '3',
				'menuName': '商品管理',
				'url': 'http://www.google.com'
			},
			{
				'index': '4',
				'menuName': '订单管理',
				'children': [
					{
						'index': '4-1',
						'menuName': '订单列表',
						'url': 'http://www.yahoo.com'
					},
					{
						'index': '4-2',
						'menuName': '退货列表',
						'url': 'http://www.sina.com'
					}
				]
			},
			{
				'index': '4',
				'menuName': '商家管理'
			}
		];
		
		// 定义树节点
		var treeMenuTemplate = [];
		treeMenuTemplate.push('<li class="el-submenu" :class="[open ? \'is-opened\': \'\', selected ? \'is-active\':\'\']">');
		treeMenuTemplate.push('<a class="db el-submenu__title" :id="model.index" @click="toggle" v-menu-animation="open" :style="{paddingLeft: paddingLeft + \'px\'}" :href="getUrl">');
		treeMenuTemplate.push('<i class="el-icon-message" v-if="level == 1"></i>');
		treeMenuTemplate.push('<template v-if="hasChildren()">');
		treeMenuTemplate.push('<i class="el-submenu__icon-arrow" :class="[open ? \'el-icon-arrow-up\': \'el-icon-arrow-down\']"></i>');
		treeMenuTemplate.push('</template>');
		treeMenuTemplate.push('{{ model.menuName }}');
		treeMenuTemplate.push('</a>');
		treeMenuTemplate.push('<ul class="el-menu" :class="[open ? \'\' : \'dn\']" v-if="hasChildren()">');
		treeMenuTemplate.push('<tree-menu v-for="item in model.children" :model="item" :level="level + 1" :theId="theId"></tree-menu>');
		treeMenuTemplate.push('</ul>');
		treeMenuTemplate.push('</li>');

		var treeMenu = Vue.component('tree-menu', {
			template: treeMenuTemplate.join(''),

			created: function () {
				var index = this.model.index;
				var hasIndex = this.theId.search(index);
				var lala = index.replace(this.theId, '');
				if (hasIndex == 0) {
					this.open = true;
				}
				if (hasIndex == 0 && lala.length == 0) {
					this.selected = true;
				}
			},

			props: ['model', 'level', 'theId'],

			computed: {
				getUrl: function () {
					if (this.hasChildren()) {
						return "javascript:;";
					}
					return this.model.url;
				}
			},

			data: function () {
				return {
					open: false,
					paddingLeft: this.level * 20,
					selected: false,
					
				};
			},

			methods: {
				hasChildren: function () {
					return this.model.children && this.model.children.length;
				},

				toggle: function () {
					if (this.hasChildren()) {
						this.open = !this.open;
					}
				},
			}

		});

		Vue.directive('menu-animation', function (el, binding) {
			var open = (binding.value);
			var ulElement = $(el).parent().children('ul');
			if (open) {
				ulElement.slideDown(200);
			} else {
				ulElement.slideUp(200);
			}
		});

		// 定义外围树
		var bigTreeTemplate = [];
		bigTreeTemplate.push('<div class="tree-menu">');
		bigTreeTemplate.push('<ul v-for="menuItem in theModel" class="el-menu">');
		bigTreeTemplate.push('<tree-menu :model="menuItem" :level="theLevel" :theId="defaultActive"></tree-menu>');
		bigTreeTemplate.push('</ul>');
		bigTreeTemplate.push('</div>');

		Vue.component('big-tree', {
			template: bigTreeTemplate.join(''),

			props: ['defaultActive'],

			created: function () { },

			data: function () {
				return {
					theModel: myData,
					theLevel: 1
				};
			},

			components: {
				'tree-menu': treeMenu
			}
		});
		new Vue({
			el: '#app',
			methods:{
				//新建事件
				addClick: function() {
      var _self = this;
      this.editFormVisible = true;
      //_self.loadingData();//重新加载数据
    },
	 //表格查询事件
    searchClick: function() {
      alert("搜索");
      var _self = this;
      _self.loadingData(); //重新加载数据
    },
	//表格勾选事件
    selectionChange: function(val) {
      for (var i = 0; i < val.length; i++) {
        var row = val[i];
      }
      this.multipleSelection = val;
      console.info(val);
    },//表格重新加载数据
    loadingData: function() {
      var _self = this;
      _self.loading = true;
      setTimeout(function() {
        console.info("加载数据成功");
        _self.loading = false;
      }, 300);
    },
    //表格编辑事件
    editClick: function(row) {
      this.editFormVisible = true;
      this.editForm = Object.assign({}, row);
    },
    //表格删除事件
    deleteClick: function(row) {
      var _self = this;
      this.$confirm("确认删除" + row.realname + "吗?", "提示", {
        type: "warning"
      })
        .then(function() {
          _self.$message({
            message: row.realname + "删除成功",
            type: "success"
          });
          _self.loadingData(); //重新加载数据
        })
        .catch(function(e) {
          if (e != "cancel") console.log("出现错误：" + e);
        });
    },
    //新建事件
    addClick: function() {
      var _self = this;
      this.editFormVisible = true;
      //_self.loadingData();//重新加载数据
    },//表格勾选事件
    selectionChange: function(val) {
      for (var i = 0; i < val.length; i++) {
        var row = val[i];
      }
      this.multipleSelection = val;
      console.info(val);
    },
    //删除所选，批量删除
    removeSelection: function() {
      var _self = this;
      var multipleSelection = this.multipleSelection;
      if (multipleSelection.length < 1) {
        _self.$message({
          message: "请至少选中一条记录",
          type: "error"
        });
        return;
      }
      var ids = "";
      for (var i = 0; i < multipleSelection.length; i++) {
        var row = multipleSelection[i];
        ids += row.realname + ",";
      }
      this.$confirm("确认删除" + ids + "吗?", "提示", {
        type: "warning"
      })
        .then(function() {
          _self.$message({
            message: ids + "删除成功",
            type: "success"
          });
          _self.loadingData(); //重新加载数据
        })
        .catch(function(e) {
          if (e != "cancel") console.log("出现错误：" + e);
        });
    },
    //分页大小修改事件
    pageSizeChange: function(val) {
      console.log("每页 " + val + " 条");
      this.pageSize = val;
      var _self = this;
      _self.loadingData(); //重新加载数据
    },
    //当前页修改事件
    currentPageChange: function(val) {
      this.currentPage = val;
      console.log("当前页: " + val);
      var _self = this;
      _self.loadingData(); //重新加载数据
    },
    //保存点击事件
    editSubmit: function() {
      console.info(this.editForm);
    }
			},
			data: function() {
			  return { visible: false,
			  awa:"",
			  //搜索表单
			  searchForm: {
				id: "",
				realname: "",
				deptname:'',
				state: "",
				position:"",
				worklife:"",
				DRUS:""
			  },
			   //显示加载中样式
			   loading: false,
			   labelPosition: 'top',
			    //多选值
				multipleSelection: [],
				//当前页
				currentPage: 1,
				//分页大小
				pageSize: 100,
				//总记录数
				total: 800,
				//删除的弹出框
				deleteVisible: false,
				//编辑界面是否显示
				editFormVisible: false,
				editLoading: false,
				editFormRules: {
					realname: [{ required: true, message: "请输入姓名", trigger: "blur" }]
				},
				//编辑界面数据
				editForm: {
					id: 0,
					realname: "",
					sex: -1,
					age: 0,
					birth: "",
					deptname: ""
				},
			   tableData: [
			   {
				 realname: "王小虎",
				 birth: "2016-05-03",
				 sex: "男",
				 deptname: "部门1",
				 position: "员工",
				 jobtype:"合同"
			   },
			   {
				 realname: "王小虎",
				 birth: "2016-05-01",
				 sex: "男",
				 deptname: "部门2",
				 position: "员工",
				 jobtype:"合同"
			   },
			   {
				 realname: "王小虎",
				 birth: "2016-05-03",
				 sex: "男",
				 deptname: "部门1",
				 position: "员工",
				 jobtype:"合同"
			   },
			   {
				 realname: "王小虎",
				 birth: "2016-05-01",
				 sex: "男",
				 deptname: "部门2",
				 position: "员工",
				 jobtype:"合同"
			   },
			   {
				 realname: "王小虎",
				 birth: "2016-05-03",
				 sex: "男",
				 deptname: "部门1",
				 position: "员工",
				 jobtype:"合同"
			   },
			   {
				 realname: "王小虎",
				 birth: "2016-05-01",
				 sex: "男",
				 deptname: "部门2",
				 position: "员工",
				 jobtype:"合同"
			   },
			   {
				 realname: "王小虎",
				 birth: "2016-05-03",
				 sex: "男",
				 deptname: "部门1",
				 position: "员工",
				 jobtype:"合同"
			   },
			   {
				 realname: "王小虎",
				 birth: "2016-05-01",
				 sex: "男",
				 deptname: "部门2",
				 position: "员工",
				 jobtype:"合同"
			   },
			   {
				 realname: "王小虎",
				 birth: "2016-05-03",
				 sex: "男",
				 deptname: "部门1",
				 position: "员工",
				 jobtype:"合同"
			   },
			   {
				 realname: "王小虎",
				 birth: "2016-05-01",
				 sex: "男",
				 deptname: "部门2",
				 position: "员工",
				 jobtype:"合同"
			   }
			 ],
			   }
			}
		  })
		  
		  $('#menu-toggle-btn').click(function () {
			var left = $('.left-sidebar'),
				main = $('.main-box'),
				$this = $(this);
			if (left.hasClass('damin')) {
				left.removeClass('damin').css('left', '0');
				main.css('padding-left', '240px');
				setTimeout(function () {
					$this.removeClass('menu-toggle-bg').css({ "right": "0", "transform": "rotateY(0)" });
				}, 300);
			} else {
				left.addClass('damin').css('left', '-240px');
				main.css('padding-left', 0);
				setTimeout(function () {
					$this.addClass('menu-toggle-bg').css({ "right": "-26px", "transform": "rotateY(180deg)" });
				}, 300);
			}
		});
	</script>
</body>

</html>